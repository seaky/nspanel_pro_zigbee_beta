/*******************************************************************************************
 *					timer	:	2023-08-01 10:00
 *					version	:	v1.2.1
 *					author	:	ljia
 */

####################################v1.2.0##################################################
v1.2.1 修改内容：
1.新增03P （支持光照档位检测）
2.新增电量统计插座（一二三）通道
3.兼容tuya 模块多路开关，控制一路其他通道会动作的问题
子设备OTA支持：电量计量插座（一二三通道）





/*******************************************************************************************
 *					timer	:	2023-05-30 12:00
 *					version	:	v1.2.0
 *					author	:	ljia
 */

####################################v1.2.0##################################################
v1.2.0 修改内容：
1、新增01P 无线开关 和第三方无线按键的功能支持
2、新增02P/02D  温湿度传感器功能支持
3. 新增04P 防拆按键支持
子设备OTA支持：01P,02P/02D,04P




/*******************************************************************************************
 *					timer	:	2023-04-28 15:00
 *					version	:	v1.1.9
 *					author	:	ljia
 */

####################################v1.1.8##################################################
v1.1.9 修改内容：

1、新增人体存在传感器和中继器的支持
2、增加人体存在传感器和中继器 子设备ota



/*******************************************************************************************



/*******************************************************************************************
 *					timer	:	2023-03-06 11:00
 *					version	:	v1.1.8
 *					author	:	yu
 */

####################################v1.1.8##################################################
v1.1.8 修改内容：

1、新增中间件支持ota设备列表文件ota_support_list.txt
2、增加ZBMINI-L，S40LITE，ZBCurtain，ZBMINIL2 子设备ota
3、添加子设备ota逻辑
4、第三方设备电量显示异常修复
（1）. 对于没有电量能力或者有电量能力但无法查到电量的子设备，不上报电量，且不上报电量能力
（2）. 对于有电量能力，且能查到电量的子设备，在入网时立即上报电量值

5、 修改温湿度在零下温度时显示错误
6、 修改双色灯添加后，显示单色灯的问题
7、 对于SONOFF和eWeLink的设备，换了一种获取设备版本号的方式


/*******************************************************************************************
 *					timer	:	2022-11-03 9:30
 *					version	:	v1.1.7
 *					author	:	yu
 */

####################################v1.1.2##################################################
v1.1.7 修改内容：

1、添加7004 7005设备ota字段
2、修改startup通电反应回复问题（缺字段）


/*******************************************************************************************
 *					timer	:	2022-10-11 17:30
 *					version	:	v1.1.5
 *					author	:	yu
 */

####################################v1.1.2##################################################
v1.1.5 修改内容：

1、修改了传感器状态上报速率


/*******************************************************************************************
 *					timer	:	2022-10-9 17:30
 *					version	:	v1.1.4
 *					author	:	yu
 */

####################################v1.1.2##################################################
v1.1.4 修改内容：

1、对绿米设备进行支持
2、修改多通道开关的全开全关控制方式
3、对S31 Lite zb进行支持


/*******************************************************************************************
 *					timer	:	2022-09-30 13:30
 *					version	:	v1.1.3
 *					author	:	yu
 */

####################################v1.1.2##################################################
v1.1.3 修改内容：

1、修改startup通道反应上报方式，支持其他有通电反应的设备。
2、过来能力上报，移除设备多余能力上报。


/*******************************************************************************************
 *					timer	:	2022-09-19 15:59
 *					version	:	v1.1.2
 *					author	:	yu
 */

####################################v1.1.2##################################################
v1.1.2 修改内容：

1、修改产测订阅内容方式。
2、修改mosquitto.conf的权限，保持跟吴经伟测试的配置一致

/*******************************************************************************************
 *					timer	:	2022-09-07 11.59
 *					version	:	v1.1.1
 *					author	:	yu
 */

####################################v1.1.1##################################################
v1.1.1 修改内容：

1、修改设备入网未上报状态的问题。


/*******************************************************************************************
 *					timer	:	2022-08-29 18:00
 *					version	:	v1.1.0
 *					author	:	yu
 */

####################################v1.1.0##################################################
v1.1.0 修改内容：

1、修改方案，用aibridge的zigbee方案替代原本的中间件。（交互协议请看aibridge的zigbee mqtt协议文档）
2、启动方式修改：
		（1）不需要在把打包的文件放到oem下运行。
		（2）启动脚本运行run.sh
		（3）产测启动脚本：factory_shell.sh
		（4）守护进程脚本（run.sh已经运行）：guard_process.sh
3、用户数据储存位置：/data/vendor/siliconlabs_host/


/*******************************************************************************************
 *					timer	:	2022-08-17 10:00
 *					version	:	v1.0.5
 *					author	:	yu
 */

####################################v1.0.4##################################################
v1.0.5 修改内容：

1、增加与app的互相ping协议
	查询
		topic gw/customize/inquire
		{cmd:"mac_inquire"}

	中间件返回：
		心跳包

/*******************************************************************************************
 *					timer	:	2022-07-27 10:00
 *					version	:	v1.0.3
 *					author	:	yu
 */

/*******************************************************************************************
 *					timer	:	2022-08-03 10:00
 *					version	:	v1.0.4
 *					author	:	yu
 */

####################################v1.0.4##################################################
v1.0.4 修改内容：

1、增加gpio_test.sh文件。（使用时必须把这个脚本一起加进去）

/*******************************************************************************************
 *					timer	:	2022-07-27 10:00
 *					version	:	v1.0.3
 *					author	:	yu
 */

####################################v1.0.3##################################################
v1.0.3 修改内容：

1、增加对窗帘的支持

############################################################################################

/*******************************************************************************************
 *					timer	:	2022-07-04 16:00
 *					version	:	v1.0.2
 *					author	:	yu
 */

####################################v1.0.2##################################################
v1.0.2 修改内容：

1、增加nodeid突变时与app的同步。
2、优化大网络接入。
3、修改心跳包，5秒一次改为1分钟一次。


############################################################################################


/*******************************************************************************************
 *					timer	:	2022-05-18 10:00
 *					version	:	v1.0.1
 *					author	:	yu
 */

####################################v1.0.0##################################################
v1.0.0修改内容：
1、增加产测内容，获取RSSI值。
2、修改获取本版号初值为：0.0.0-0 （表示未获取版本号）
3、MAC地址初值：FFFFFFFFFFFFFFFF （表示未获取MAC地址）
4、增加编译时间显示
5、增加未获取RSSI值，返回值：-127

v1.0.1 修改内容：
1、增加发送信道说明：16信道
2、修改run.sh启动方式

############################################################################################

#文件夹内容：
- factory_shell.sh
- libmosquitto.so.1
- mosquitto
- mosquitto.conf
- mosquitto_pub
- mosquitto_sub
- run.sh
- Z3GatewayHost_sonoff
- Readme.txt

run.sh：为Z3GatewayHost_sonoff程序执行脚本
factory_shell.sh：产测开始脚本，并显示返回结果
libmosquitto.so.1：mosquitto库

#step1:
	mosquitto发送topic : “gw/factoryTest”
	mosquitto接收topic : "gw/factoryTest"

#step2:
	开始产测
	mosquitto发送内容：
		“{\"commands\":\"FactoryTest\"}”

	发送命令：mosquitto_pub -t "gw/factoryTest" -q 2 -m "{\"commands\":\"FactoryTest\"}"
	产测执行时间：3s

#step3:
	产测发送信道：16
	产测端发送内容：{0x11, 0x31, 0x31, 0x32, 0x32, 0x33, 0x33}

#step4:
	产测结果
	mosquitto接收内容：
		{"mode":"Factory","MAC":"680AE2FFFE6E1360","version":"6.10.1-216","RSSI":-127}
	<-127表示未正确获取RSSI值>

<字段解析>：
mode : 模式，Factory：产测模式
MAC  ：被测试设备MAC地址
version : 被测试设备版本号
RSSI ：被测试设备接收到数据的RSSI值
